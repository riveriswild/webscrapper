
# Webscrapper 

Вебскреппер для парсинга данных категории "лего" с сайта detmir.ru



## Обзор

Скрепер представлен в двух версиях.
### Версия 1 (webscrapper_v1)
Собирает данные по списку городов, записывает в общий csv файл products.csv. В файле присутствует графа "Город".

### Версия 2 (webscrapper_v2)
Записывает данные по каждому городу в отдельный файл. Формат названия: город_products.csv.


Образцы выходных данных предоставлены в соответствующих директориях версий.


## Установка и запуск

Для запуска скреппера клонируйте репозиторий:

```bash
git clone https://gitlab.com/riveriswild/mailing_api.git
```

Активируйте виртуальное окружение
```bash
python -m venv venv  
source venv/bin/activate
```
Установите зависимости
```bash
pip install -r requirements.txt
```

Для запуска версии 1 (сборные данные по городам в один файл)

```bash
cd webscrapper_v1
python wscrapper.py

```
Для запуска версии 2 (данные сохранятся в отдельные файлы по городам)

```bash
cd webscrapper_v1
python wscrapper.py

```

## Возможные проблемы и потенциальные улучшения

- Необходима оптимизация процесса обработки страницы. На данный момент продукты из промо-блока, не относящиеся к категории отфильтровываются перед записью в файл.
- Имеет смысл сделать скрипт асинхронным для ускорения его работы, к примеру, с использованием FastApi
- При формате названия продукта "Название, продолжение названия" может произойти погрешность обработки. Для боевой версии это стоит исправить, на данный момент погрешность составляет 5 продуктов из ~2000.
- Имеет смысл версия скрепера, собирающего только продукты в наличии. 



## Дополнительные возможности

Для обработки продуктов по другим городам возможно добавление городов в список 

```
cities = ['Санкт-Петербург и Ленинградская область', 'Москва и Московская область']
```

Названия города должно быть заключено в кавычки и полностью соответствовать его названию во всплывающем окне "Выбор региона". Названия городов в списке разделяются запятыми.
